(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fbdbc1a"],{"13eb":function(e,t,s){t=e.exports=s("2350")(!1),t.push([e.i,"table td{padding:20px!important}.reviewer{padding-bottom:10px}table .v-rating{display:inline-block;margin-left:20px;margin-top:-1px}table h3{display:inline-block;padding-left:8px;padding-top:3px}table .v-chip{float:right}.searching .v-card__title{font-size:15px}.source-logo{float:right;width:22px;height:22px;opacity:.8;margin-right:0;margin-top:8px}.profile-pic{border-radius:50%;width:30px;height:30px;float:left}.v-data-table-header,.v-data-table__mobile-row__header{display:none}header .v-toolbar__content{width:auto}",""])},"2b91":function(e,t,s){"use strict";var a=s("ec32"),i=s.n(a);i.a},"8f2b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("panel-navigation",[a("h1",{staticClass:"text-lg font-semibold mb-4"},[e._v("Reviews")]),a("hr",{staticClass:"border-b border-gray-100 mb-3"}),a("v-container",[a("v-row",{staticClass:"text-center"},[a("v-col",{staticClass:"mb-4 col-md-12"},[e.business?e._e():a("v-skeleton-loader",{attrs:{type:"article"}}),e.business?a("v-card",{staticClass:"mb-4",attrs:{elevation:"2"}},[a("v-card-title",[e._v(e._s(e.business.name)+" ("+e._s(e.business.address)+", "+e._s(e.business.city)+" "+e._s(e.business.state)+")")]),a("v-card-text",[e.business?a("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[a("v-rating",{attrs:{value:e.business.average_rating,color:"amber",dense:"","half-increments":"",readonly:"",size:"28"}}),e.business?a("div",{staticClass:"grey--text ml-4"},[e._v("\n                "+e._s(parseFloat(e.business.average_rating).toFixed(2))+" ("+e._s(e.totalReviews.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))+")\n            ")]):e._e()],1):e._e()],1)],1):e._e(),e.business&&e.business.percentage_complete<100?a("v-card",{staticClass:"searching",attrs:{elevation:"2"}},[a("v-card-title",[e._v("We are searching for your reviews... Please wait ("+e._s(parseFloat(e.business.percentage_complete).toFixed(2))+"%)")]),a("v-card-text",[a("v-progress-linear",{attrs:{color:"teal","buffer-value":"0",value:e.business.percentage_complete,stream:""}})],1)],1):e._e(),e.business?[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.reviews,options:e.options,"server-items-length":e.totalFilteredReviews,"items-per-page":5,loading:e.loading_reviews,"footer-props":{itemsPerPageOptions:[5,10,20,30,40,50,100],showFirstLastPage:!0}},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"header",fn:function(){return[a("v-toolbar",{staticClass:"mb-1",attrs:{dark:"",color:"green darken-6"}},[a("v-row",[a("v-col",{attrs:{cols:"12",md:"3",sm:"3",xs:"6"}},[a("v-text-field",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.$vuetify.breakpoint.smAndUp?[a("v-col",{attrs:{cols:"12",md:"3",sm:"3",xs:"6"}},[a("v-select",{attrs:{flat:"","solo-inverted":"","hide-details":"",items:e.sort_by_keys,"prepend-inner-icon":"mdi-sort",label:"Sort by"},model:{value:e.options.sortBy,callback:function(t){e.$set(e.options,"sortBy",t)},expression:"options.sortBy"}})],1),a("v-spacer"),a("v-col",{attrs:{cols:"12",md:"3",sm:"3",xs:"6"}},[a("v-select",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"",items:e.filter_rating_keys,"prepend-inner-icon":"mdi-hexagram",label:"Rating"},model:{value:e.filter_rating,callback:function(t){e.filter_rating=t},expression:"filter_rating"}})],1),a("v-spacer"),a("v-col",{attrs:{cols:"12",md:"3",sm:"3",xs:"6"}},[a("v-select",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"",items:e.filter_website_keys,"prepend-inner-icon":"mdi-earth",label:"Any Website","item-text":"name","item-value":"domain"},model:{value:e.filter_website,callback:function(t){e.filter_website=t},expression:"filter_website"}})],1)]:e._e()],2)],1)]},proxy:!0},{key:"item.url",fn:function(t){var s=t.item;return[s?a("span",[e._v(e._s(e.getHostname(s)))]):e._e()]}},{key:"item.rating_value",fn:function(e){var t=e.item;return[a("v-rating",{attrs:{value:t.rating_value,color:"amber",dense:"","half-increments":"",readonly:"",size:"20"}})]}},{key:"item.review_text",fn:function(t){var i=t.item;return[a("div",{staticClass:"reviewer"},[i.profile_picture?a("img",{staticClass:"profile-pic",attrs:{src:i.profile_picture}}):e._e(),i.profile_picture?e._e():a("v-avatar",{attrs:{color:"blue",size:"30"}},[a("v-icon",{attrs:{small:"",color:"white"}},[e._v("mdi-account")])],1),a("h3",[e._v(e._s(i.name))]),a("v-rating",{attrs:{value:i.rating_value,color:"amber",dense:"","half-increments":"",readonly:"",size:"20"}}),a("v-chip",{staticClass:"ma-2",attrs:{filter:"",small:""}},[e._v("\n                "+e._s(e.formatDate(i.date))+"\n                ")]),a("v-chip",{staticClass:"ma-2",attrs:{filter:"",small:"",color:"blue","text-color":"white"}},[e._v("\n\n                "+e._s(e.getHostname(i))+"\n                ")]),a("img",{staticClass:"source-logo",attrs:{src:s("3e7b")("./www."+e.getHostname(i)+".png")}})],1),a("em",[a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("\n                    "+e._s(e.displayExpansionTitle(i))+"\n                    ")]),a("v-expansion-panel-content",[a("div",{domProps:{innerHTML:e._s(i.review_text)}})])],1)],1)],1)]}}],null,!1,1834844045)})]:e._e()],2)],1)],1)],1)},i=[],n=(s("a481"),s("386d"),s("8028")),r=s("f6c9"),o=s("c1df"),l=s.n(o),c=s("f121"),d=s.n(c),p={components:{PanelNavigation:r["a"]},data:function(){return{business:null,loading_reviews:!0,totalReviews:0,totalFilteredReviews:0,reviews:[],options:{sortBy:"Newest First"},headers:[{text:"Reviews",value:"review_text",html:!0,sortable:!1}],read_more:[],percentage_complete:0,search:"",sort_by_keys:["Newest First","Oldest First"],filter_rating_keys:["1","2","3","4","5","Positive","Negative"],filter_rating:"",filter_website_keys:d.a.reviewSites,filter_website:""}},mounted:function(){this.fetchBusinessDetails()},methods:{fetchBusinessDetails:function(){var e=this;n["a"].get(this.$route.params.id).then((function(t){t.data.success?(e.business=t.data.business,e.business.percentage_complete<100&&setTimeout((function(){e.fetchBusinessDetails(),e.getReviews(!0)}),2e3)):console.log("failed")})).catch((function(){console.log("request failed")})).finally((function(){}))},getReviews:function(e){var t=this;"undefined"==typeof e&&(t.loading_reviews=!0);var s=this.options,a=s.sortBy,i=s.sortDesc,r=s.page,o=s.itemsPerPage;this.loading=!0,console.log("get revs"),n["a"].getReviews(this.$route.params.id,a,i,r,o,t.search||"",t.filter_rating||"",t.filter_website||"").then((function(e){for(var s in console.log("done"),t.reviews=e.data.reviews,t.totalReviews=e.data.totalReviews,t.totalFilteredReviews=e.data.totalFilteredReviews,t.loading_reviews=!1,t.reviews)t.read_more[t.reviews[s].id]=!1}))},testClick:function(){console.log("tc"),console.log(this.read_more)},getHostname:function(e){return console.log(e),new URL(e.url||e.listing.url).hostname.replace("www.","")},formatDate:function(e){return l()(String(e)).format("MM/DD/YYYY")},displayExpansionTitle:function(e){return e.review_title?e.review_title:e.review_text?e.review_text.substring(0,50)+"...":"No text"}},watch:{options:{handler:function(){"Newest First"==this.options.sortBy?(this.options.sortBy="date",this.options.sortDesc=!0):"Oldest First"==this.options.sortBy&&(this.options.sortBy="date",this.options.sortDesc=!1),this.getReviews()},deep:!0},search:{handler:function(){this.options.page=1,this.getReviews()}},filter_rating:{handler:function(){this.options.page=1,this.getReviews()}},filter_website:{handler:function(){this.options.page=1,this.getReviews()}}}},v=p,u=(s("2b91"),s("2877")),f=s("6544"),g=s.n(f),m=s("8212"),_=s("b0af"),b=s("99d9"),h=s("cc20"),w=s("62ad"),x=s("a523"),y=s("8fea"),k=s("cd55"),C=s("49e2"),R=s("c865"),V=s("0393"),F=s("132d"),P=s("8e36"),B=s("1d4d"),D=s("0fd9"),S=s("b974"),T=s("3129"),E=s("2fa4"),H=s("8654"),N=s("71d9"),z=Object(u["a"])(v,a,i,!1,null,null,null);t["default"]=z.exports;g()(z,{VAvatar:m["a"],VCard:_["a"],VCardText:b["a"],VCardTitle:b["b"],VChip:h["a"],VCol:w["a"],VContainer:x["a"],VDataTable:y["a"],VExpansionPanel:k["a"],VExpansionPanelContent:C["a"],VExpansionPanelHeader:R["a"],VExpansionPanels:V["a"],VIcon:F["a"],VProgressLinear:P["a"],VRating:B["a"],VRow:D["a"],VSelect:S["a"],VSkeletonLoader:T["a"],VSpacer:E["a"],VTextField:H["a"],VToolbar:N["a"]})},ec32:function(e,t,s){var a=s("13eb");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=s("499e").default;i("ba160068",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-7fbdbc1a.014a93d7.js.map